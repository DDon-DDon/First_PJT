---
name: doc-updater
description: 로드맵/체크리스트 문서의 진행 상태를 업데이트하는 스킬. (1) 태스크 완료 후 "체크리스트 업데이트해줘", "완료 표시해줘" 요청 시, (2) 진행률 갱신이 필요할 때, (3) Phase 완료 시 요약 업데이트 시 트리거. 마크다운 체크리스트의 상태를 변경하고 진행률을 자동 계산함.
---

# Doc Updater

로드맵 및 체크리스트 문서의 진행 상태를 업데이트한다. 체크박스 상태 변경, 진행률 계산, 완료 시간 기록 등을 수행.

## 핵심 기능

### 1. 체크리스트 상태 변경

```markdown
변경 전: - [ ] 태스크 1
변경 후: - [x] 태스크 1
```

### 2. 진행률 자동 계산

```markdown
변경 전: Phase A: [Phase명] ░░░░░░░░░░░░░░░░░░░░ 0%
변경 후: Phase A: [Phase명] ████████░░░░░░░░░░░░ 40%
```

### 3. 상태 표시 업데이트

```markdown
변경 전: | X-1. 태스크 | 2일 | ⬜ 대기 |
변경 후: | X-1. 태스크 | 2일 | ✅ 완료 |
```

### 4. 타임스탬프 갱신

```markdown
**최종 업데이트**: 2026-01-24
```

## 워크플로우

### Step 1: 문서 로드

- 로드맵/체크리스트 파일 경로 확인
- 현재 문서 내용 파싱

### Step 2: 변경 사항 식별

사용자 요청에서 파악:

- 완료할 태스크/서브태스크
- 상태 변경 (대기 → 진행중 → 완료)
- 추가 메모/노트

### Step 3: 문서 업데이트

1. 체크박스 상태 변경
2. 진행률 재계산
3. 상태 표시 업데이트
4. 타임스탬프 갱신

### Step 4: 변경 내역 출력

무엇이 변경되었는지 요약 제공

## 업데이트 규칙

### 체크박스 변환

```
미완료 → 완료: - [ ] → - [x]
완료 → 미완료: - [x] → - [ ]
```

### 진행률 계산

```
진행률 = (완료된 체크박스 수 / 전체 체크박스 수) × 100

예: 10개 중 4개 완료 → 40%
```

### 진행률 바 생성

```
  0%: ░░░░░░░░░░░░░░░░░░░░
 25%: █████░░░░░░░░░░░░░░░
 50%: ██████████░░░░░░░░░░
 75%: ███████████████░░░░░
100%: ████████████████████
```

### 상태 아이콘

```
⬜ 대기 (Todo)
🔄 진행중 (In Progress)
✅ 완료 (Done)
⏸️ 보류 (On Hold)
❌ 취소 (Cancelled)
```

## 사용 예시

### 단일 태스크 완료

**요청**: "A-1 태스크의 '스키마 정의' 완료 처리해줘"

**변경 전**:

```markdown
### A-1. OpenAPI 스펙 강화

#### 체크리스트

- [ ] 공통 에러 응답 스키마 정의
- [ ] 엔드포인트 설명 추가
```

**변경 후**:

```markdown
### A-1. OpenAPI 스펙 강화

#### 체크리스트

- [x] 공통 에러 응답 스키마 정의
- [ ] 엔드포인트 설명 추가
```

### 태스크 전체 완료

**요청**: "A-1 태스크 전체 완료"

**변경 사항**:

1. 모든 서브태스크 체크
2. 일정 테이블 상태 업데이트
3. Phase 진행률 업데이트

### 진행 상태 변경

**요청**: "A-2 태스크 진행중으로 변경"

**변경 전**:

```markdown
| A-2. Postman Collection | 1일 | ⬜ 대기 |
```

**변경 후**:

```markdown
| A-2. Postman Collection | 1일 | 🔄 진행중 |
```

## 출력 형식

### 변경 요약

```markdown
## 📝 문서 업데이트 완료

**파일**: `docs/roadmap.md`
**시간**: 2026-01-24 15:30

### 변경 내역

- ✅ A-1: "스키마 정의" 완료 처리
- 📊 Phase A 진행률: 0% → 25%

### 현재 상태

- Phase A: 25% (1/4 태스크)
- 다음 태스크: A-1의 "엔드포인트 설명 추가"
```

## 주의사항

### 파일 백업

중요한 변경 전 원본 내용 보존 권장

### 포맷 유지

기존 문서의 마크다운 포맷 스타일 유지:

- 들여쓰기 일관성
- 빈 줄 처리
- 헤더 레벨

### 충돌 방지

동시에 여러 항목 변경 시 순서대로 처리

---

## 🆕 Phase 구현 매뉴얼 문서 생성

Phase 완료 시 **상세한 구현 매뉴얼 문서**를 생성한다. 이 문서는 구현 내용을 기록하고, 향후 참조 및 온보딩 자료로 활용된다.

### 트리거

- "Phase 완료" 후 문서 업데이트 시
- "매뉴얼 작성해줘", "구현 문서화해줘" 요청 시
- 커밋 완료 후 문서화 단계에서

### 저장 위치

```
backend/docs/implemented/
├── 2026-01-20_phase-a-api-documentation.md
├── 2026-01-25_phase-b-testing.md
├── 2026-01-31_phase-c-logging.md          ← 예시
└── 2026-02-05_phase-d-optimization.md
```

### 파일 명명 규칙

```
YYYY-MM-DD_작업내용.md

예시:
- 2026-01-31_phase-c-logging.md
- 2026-01-31_phase-c-error-handling.md
- 2026-02-01_hotfix-stock-validation.md
```

### 문서 구조 (필수 섹션)

````markdown
# Phase [X]: [Phase 이름] 구현 문서

**작성일**: YYYY-MM-DD  
**작성자**: iskim  
**Phase 기간**: YYYY-MM-DD ~ YYYY-MM-DD  
**관련 커밋**: [커밋 해시 또는 링크]

---

## 1. 개요 (Overview)

### 1.1 목적

- 이 Phase에서 해결하고자 한 문제
- 달성하고자 한 목표

### 1.2 범위

- 포함된 태스크 목록
- 영향받는 모듈/파일

### 1.3 사전 조건

- 필요한 의존성
- 선행 Phase/태스크

---

## 2. 구현 내용 (Implementation Details)

### 2.1 아키텍처 개요

- 전체 구조 다이어그램 (ASCII 또는 Mermaid)
- 컴포넌트 간 관계

### 2.2 태스크별 구현

#### [X-1] 태스크 이름

**파일**: `app/path/to/file.py`

**핵심 코드**:

```python
# 주요 코드 스니펫 (핵심 로직만)
```
````

**설명**: 이 코드가 하는 일과 동작 방식

#### [X-2] 태스크 이름

...

### 2.3 설정 및 환경

- 추가된 환경 변수
- 설정 파일 변경 사항
- 의존성 추가

---

## 3. 설계 결정 (Design Decisions)

### 3.1 선택한 접근 방식

| 결정 사항       | 선택      | 대안               | 선택 이유                      |
| --------------- | --------- | ------------------ | ------------------------------ |
| 로깅 라이브러리 | structlog | python-json-logger | 프로세서 체인, 컨텍스트 바인딩 |
| ...             | ...       | ...                | ...                            |

### 3.2 트레이드오프 분석

**장점**:

- 장점 1
- 장점 2

**단점**:

- 단점 1 (해결 방법 또는 수용 이유)
- 단점 2

### 3.3 미래 고려사항

- 확장 가능성
- 알려진 제한사항

---

## 4. 사용 방법 (Usage Guide)

### 4.1 기본 사용법

```python
# 사용 예시 코드
```

### 4.2 설정 옵션

- 설정 가능한 옵션 목록
- 권장 설정값

### 4.3 주의사항

- 사용 시 주의할 점
- 흔한 실수

---

## 5. 테스트 및 검증 (Testing & Validation)

### 5.1 테스트 범위

- 단위 테스트: N개
- 통합 테스트: N개
- 테스트 커버리지: N%

### 5.2 검증 방법

```bash
# 테스트 실행 명령어
pytest tests/test_xxx.py -v
```

### 5.3 수동 검증 항목

- [ ] 검증 항목 1
- [ ] 검증 항목 2

---

## 6. 문제 해결 (Troubleshooting)

### 6.1 알려진 이슈

| 증상 | 원인 | 해결 방법 |
| ---- | ---- | --------- |
| ...  | ...  | ...       |

### 6.2 디버깅 팁

- 디버깅 시 확인할 사항
- 유용한 로그 위치

---

## 7. 결론 (Conclusion)

### 7.1 달성 사항

- 완료된 목표 요약
- 주요 성과

### 7.2 다음 단계

- 후속 Phase와의 연관성
- 추가 개선 가능 영역

### 7.3 참고 자료

- 관련 문서 링크
- 외부 레퍼런스

````

### 작성 가이드라인

1. **구체적으로 작성**: 추상적 설명보다 실제 코드와 예시 중심
2. **이유 설명**: "무엇"보다 "왜"에 집중
3. **실용적 정보**: 읽는 사람이 바로 활용할 수 있도록
4. **일관된 형식**: 모든 Phase 문서가 동일한 구조 유지
5. **코드 스니펫**: 핵심 로직만 발췌, 전체 코드는 파일 참조

### 예시: Phase C 매뉴얼 목차

```markdown
# Phase C: 에러 핸들링 & 로깅 구현 매뉴얼

## 1. 개요
- 목적: 운영 환경에서 디버깅 가능한 로깅 시스템 구축
- 범위: C-1 ~ C-4 (예외 처리, 로깅, Request ID, 요청/응답 로깅)

## 2. 구현 내용
- C-1: ApiException 계층 구조
- C-2: structlog 기반 로깅 시스템
- C-3: RequestIdMiddleware
- C-4: LoggingMiddleware

## 3. 설계 결정
- structlog 선택 이유: 프로세서 체인, 컨텍스트 바인딩
- 민감 정보 마스킹: SENSITIVE_KEYS 세트 기반

## 4. 사용 방법
- get_logger() 함수 사용법
- bind_contextvars() 사용법

## 5. 테스트 및 검증
- X-Request-ID 헤더 확인
- 로그 출력 검증

## 6. 문제 해결
- structlog not found → uv pip install structlog

## 7. 결론
- 구조화된 로깅으로 디버깅 효율성 향상
- 다음: Phase D 쿼리 최적화
````

### 자동화 체크리스트

Phase 완료 시 다음을 확인:

- [ ] 매뉴얼 문서 생성 (`docs/implemented/YYYY-MM-DD_phase-x-xxx.md`)
- [ ] 모든 필수 섹션 포함
- [ ] 코드 스니펫 검증
- [ ] 링크 유효성 확인
